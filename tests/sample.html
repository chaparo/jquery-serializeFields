<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-1.11.3.js"></script>
    <script src="../src/jquery-serializeFields.js"></script>
</head>

<body>

    <form id="form1">
        <input type="text" name="username" value="my user name" />

        <fieldset data-name="address">
            <legend>Address</legend>
            <input type="text" name="street" value="654, test street" />
            <input type="text" name="country" value="Brazil" />
        </fieldset>

        <fieldset data-name="contact">
            <legend>Contact</legend>
            <input type="text" name="email" value="contact@mysite.com" />
            <fieldset data-name="phones">
                <legend>Phones</legend>
                <input type="text" name="primary" value="+55 51 123456789" />
                <input type="text" name="mobile" value="+55 51 987654987" />
            </fieldset>
        </fieldset>

        <input type="submit" />
    </form>

    <script>
        $(document).ready(function() {
            $("#form1").submit(function(event) {

                // get json

                var data = $(this).serializeFields();

                event.preventDefault();
                alert(JSON.stringify(data));
            });
        });
    </script>

</body>

</html>
